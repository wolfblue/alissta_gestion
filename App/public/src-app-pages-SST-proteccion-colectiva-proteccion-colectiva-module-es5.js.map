{"version":3,"sources":["webpack:///src/app/pages/SST/proteccion-colectiva/proteccion-colectiva.page.html","webpack:///src/app/pages/SST/proteccion-colectiva/proteccion-colectiva-routing.module.ts","webpack:///src/app/pages/SST/proteccion-colectiva/proteccion-colectiva.module.ts","webpack:///src/app/pages/SST/proteccion-colectiva/proteccion-colectiva.page.scss","webpack:///src/app/pages/SST/proteccion-colectiva/proteccion-colectiva.page.ts"],"names":["routes","path","component","loadChildren","then","m","EvidenciaPageModule","ProteccionColectivaPageRoutingModule","imports","forChild","exports","ProteccionColectivaPageModule","declarations","ProteccionColectivaPage","router","modalController","utils","questionService","dataService","alertController","tablaTrabajadoresService","selectedItemsService","maestroPadre","maestroHijo","tituloEitmes","selectedItems","numerObligarorios","observaciones","contadorObs","filtradosItems","submited","getData","getSelectedItems","event","value","console","log","id","undefined","setSelectedItems","create","modal","present","dataUrl","history","state","data","setListaTrabajadores","setData","length","map","reduce","acc","items","Fk_ID_PermisoAlturas_ItemProteccionPadre","presentLoading","getAllMaestroPadres","getAllMaestroHijos","forEach","padre","hijo","Pk_ID_PermisoAlturas_ItemProteccionPadre","boolObligatorio","strDescricionPermiso","push","dismissLoading","checkQuestions","check","quitarAsterisco","mostrarError","guardarDatos","navigate","element","saveData","obj","Object","values","filter","item","i","j","replace","numeroContestados","numeroObligatorios","TodosTitulosConHijos","includes","key","hasOwnProperty","preguntasObligatorias","elements","preguntasObligatoriasRespondidas","tituloItem","find","toString","titulosIncompletos","join","message","header","buttons","alert","target","selector","template"],"mappings":"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","file":"src-app-pages-SST-proteccion-colectiva-proteccion-colectiva-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <app-nav-bar></app-nav-bar>\\n  <div class=\\\"toolbar\\\">\\n    <ion-title style=\\\"color: #7e7e7e; padding: 0\\\"><strong> Registro Permiso</strong></ion-title>\\n  </div>\\n</ion-header>\\n\\n<ion-content>\\n  <div>\\n    <ion-item class=\\\"mostrar-usuarios\\\">\\n      <p class=\\\"center-trabajadores\\\" (click)=\\\"verTrabajadores()\\\">\\n        <ion-icon style=\\\"font-size: 1.1rem\\\" name=\\\"people\\\"></ion-icon>Ver Trabajadores\\n      </p>\\n      <ion-icon (click)=\\\"back()\\\" name=\\\"chevron-back-outline\\\" slot=\\\"start\\\"></ion-icon>\\n    </ion-item>\\n  </div>\\n  <div class=\\\"toolbar toolcontent\\\">\\n    <ion-icon style=\\\"width: 24px; height: 24px\\\" name=\\\"shield-half-outline\\\"></ion-icon>\\n    <ion-title>Proteccion Colectiva e Individual</ion-title>\\n  </div>\\n  <div class=\\\"ion-padding\\\">\\n    <ion-list *ngFor=\\\"let maestro of maestroPadre\\\">\\n      <ion-card-header>\\n        <ion-card-title>{{maestro.strDescricionPermiso}}</ion-card-title>\\n      </ion-card-header>\\n\\n      <ion-item\\n        *ngIf=\\\"tituloEitmes[maestro.Pk_ID_PermisoAlturas_ItemProteccionPadre].length ===0\\\"\\n        class=\\\"ion-padding-start ion-padding-end border\\\"\\n      >\\n        <ion-label>Ésta protección colectiva no tiene items creados</ion-label>\\n        <ion-select multiple=\\\"true\\\" cancelText=\\\"Cancelar\\\" okText=\\\"Aceptar\\\"></ion-select>\\n      </ion-item>\\n      <ion-item\\n        *ngIf=\\\"tituloEitmes[maestro.Pk_ID_PermisoAlturas_ItemProteccionPadre].length !==0\\\"\\n        class=\\\"ion-padding-start ion-padding-end border\\\"\\n      >\\n        <ionic-selectable\\n          item-content\\n          [(ngModel)]=\\\"selectedItems[maestro.Pk_ID_PermisoAlturas_ItemProteccionPadre]\\\"\\n          [itemValueField]=\\\"'Pk_ID_PermisoAlturas_ProteccionHijos'\\\"\\n          [itemTextField]=\\\"'strDescricionPermiso'\\\"\\n          [items]=\\\"tituloEitmes[maestro.Pk_ID_PermisoAlturas_ItemProteccionPadre]\\\"\\n          [canSearch]=\\\"true\\\"\\n          (onChange)=\\\"portChange($event)\\\"\\n          [isMultiple]=\\\"true\\\"\\n          closeButtonText=\\\"Cancelar\\\"\\n          closeButtonSlot=\\\"end\\\"\\n          placeholder=\\\"Seleccione...\\\"\\n          [searchFailText]=\\\"'No encontramos el item buscado'\\\"\\n          searchPlaceholder=\\\"Buscar\\\"\\n        >\\n        </ionic-selectable>\\n      </ion-item>\\n    </ion-list>\\n    <ion-col class=\\\"question\\\">\\n      <ion-card-header>\\n        <ion-card-title> <strong class=\\\"requieredQues\\\">*</strong> Observaciones</ion-card-title>\\n      </ion-card-header>\\n      <div *ngIf=\\\"submited && !observaciones\\\" class=\\\"error-message\\\">Campo requerido</div>\\n      <ion-card-content>\\n        <ion-row>\\n          <ion-textarea (ionChange)=\\\"actualizarContador($event)\\\" [(ngModel)]=\\\"observaciones\\\" maxlength=\\\"2000\\\"></ion-textarea>\\n        </ion-row>\\n        <p class=\\\"counter\\\">{{contadorObs}}/2000</p>\\n      </ion-card-content>\\n    </ion-col>\\n\\n    <div class=\\\"ion-text-center ion-padding\\\">\\n      <button class=\\\"guardar-continuar\\\" expand=\\\"block\\\" color=\\\"secondary\\\" (click)=\\\"continuar()\\\">Guardar y Continuar</button>\\n    </div>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProteccionColectivaPage } from './proteccion-colectiva.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProteccionColectivaPage,\n  },\n  {\n    path: 'evidencia',\n    loadChildren: () => import('src/app/pages/SST/evidencia/evidencia.module').then(m => m.EvidenciaPageModule),\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProteccionColectivaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProteccionColectivaPageRoutingModule } from './proteccion-colectiva-routing.module';\n\nimport { ProteccionColectivaPage } from './proteccion-colectiva.page';\nimport { SharedModule } from 'src/app/shared.module';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, ProteccionColectivaPageRoutingModule, SharedModule],\n  declarations: [ProteccionColectivaPage],\n})\nexport class ProteccionColectivaPageModule {}\n","export default \"div.toolbar {\\n  background: #beb2b2;\\n  color: #fff;\\n  padding: 0 16px;\\n  height: 48px;\\n  align-items: center;\\n  display: flex;\\n  text-align: center;\\n}\\ndiv.toolbar ion-title {\\n  color: #fff;\\n}\\ndiv.toolbar.toolcontent {\\n  background-color: var(--ion-color-primary);\\n}\\nbutton.guardar-continuar {\\n  color: #fff;\\n  background: #4b9a49 !important;\\n  margin-top: 10px;\\n  border-radius: 24px;\\n  width: 80%;\\n  height: 24px;\\n  font-size: 14px;\\n  font-weight: 500;\\n  text-transform: none;\\n  border: none;\\n  outline: none;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n}\\nion-label {\\n  margin-top: 12px;\\n  margin-bottom: auto;\\n  padding: auto;\\n  font-size: 14px;\\n  font-weight: 500;\\n  text-transform: uppercase;\\n  color: #000;\\n  text-align: justify;\\n}\\nion-item.mostrar-usuarios {\\n  /* quitar estilos */\\n  --background: none;\\n  --border-color: none;\\n  --border-style: none;\\n  width: 100%;\\n  background: var(--ion-background-color);\\n  color: var(--ion-color-primary);\\n  padding: 0 16px;\\n  height: 48px;\\n  width: 100%;\\n  align-items: center;\\n  display: flex;\\n  text-align: center;\\n}\\nion-card-title {\\n  color: var(--ion-color-primary);\\n  font-weight: 600;\\n}\\n.scroll-custom {\\n  text-overflow: clip !important;\\n  white-space: nowrap !important;\\n  overflow: scroll !important;\\n}\\ndiv.alert-checkbox-label {\\n  text-overflow: clip !important;\\n  white-space: nowrap !important;\\n  overflow: scroll !important;\\n}\\nion-textarea {\\n  margin: 0;\\n  margin-bottom: 10px;\\n  padding: 0;\\n  width: 100%;\\n  height: 80px;\\n  border: 1px solid var(--ion-color-medium);\\n  border-radius: 5px;\\n}\\nion-card {\\n  width: 100%;\\n}\\n.requieredQues {\\n  color: red !important;\\n}\\nion-item.border {\\n  height: 45px;\\n  border: 1px solid #808080;\\n  border-radius: 10px;\\n}\\n.center-trabajadores {\\n  width: 100%;\\n  display: flex;\\n  text-align: center;\\n  justify-content: center;\\n  font-size: 17px;\\n}\\nion-select {\\n  width: 100%;\\n}\\np.counter {\\n  display: flex;\\n  color: #85b3e1 !important;\\n  justify-content: end;\\n  margin-top: 0;\\n  color: var(--ion-color-primary);\\n}\\n.select-icon {\\n  width: 12px;\\n  height: 26px;\\n  opacity: 1;\\n}\\nalert-checkbox-label.sc-ion-alert-md {\\n  padding-left: 53px;\\n  padding-right: 26px;\\n  padding-top: 13px;\\n  padding-bottom: 13px;\\n  flex: 1;\\n  color: var(--ion-color-step-850, #262626);\\n  font-size: 16px;\\n  text-overflow: clip;\\n  white-space: nowrap;\\n  overflow: auto;\\n}\\n.error-message {\\n  color: red;\\n  font-size: 12px;\\n}\\nion-modal.modal-wrapper.ion-overlay-wrapper.sc-ion-modal-md,\\nion-modal.modal-wrapper.ion-overlay-wrapper.sc-ion-modal-ios {\\n  width: 80% !important;\\n  height: 80% !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvU1NUL3Byb3RlY2Npb24tY29sZWN0aXZhL3Byb3RlY2Npb24tY29sZWN0aXZhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLG1CQUFBO0VBQ0EsV0FBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUFDRjtBQUFFO0VBQ0UsV0FBQTtBQUVKO0FBQUU7RUFDRSwwQ0FBQTtBQUVKO0FBRUE7RUFDRSxXQUFBO0VBQ0EsOEJBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsVUFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxvQkFBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0EsZUFBQTtFQUNBLHlCQUFBO0FBQ0Y7QUFDQTtFQUNFLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0VBQ0EseUJBQUE7RUFDQSxXQUFBO0VBQ0EsbUJBQUE7QUFFRjtBQUFBO0VBQ0UsbUJBQUE7RUFDQSxrQkFBQTtFQUNBLG9CQUFBO0VBQ0Esb0JBQUE7RUFDQSxXQUFBO0VBQ0EsdUNBQUE7RUFDQSwrQkFBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLG1CQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0FBR0Y7QUFBQTtFQUNFLCtCQUFBO0VBQ0EsZ0JBQUE7QUFHRjtBQUFBO0VBQ0UsOEJBQUE7RUFDQSw4QkFBQTtFQUNBLDJCQUFBO0FBR0Y7QUFEQTtFQUNFLDhCQUFBO0VBQ0EsOEJBQUE7RUFDQSwyQkFBQTtBQUlGO0FBREE7RUFDRSxTQUFBO0VBQ0EsbUJBQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSx5Q0FBQTtFQUNBLGtCQUFBO0FBSUY7QUFEQTtFQUNFLFdBQUE7QUFJRjtBQURBO0VBQ0UscUJBQUE7QUFJRjtBQURBO0VBQ0UsWUFBQTtFQUNBLHlCQUFBO0VBQ0EsbUJBQUE7QUFJRjtBQURBO0VBQ0UsV0FBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLHVCQUFBO0VBQ0EsZUFBQTtBQUlGO0FBREE7RUFDRSxXQUFBO0FBSUY7QUFEQTtFQUNFLGFBQUE7RUFDQSx5QkFBQTtFQUNBLG9CQUFBO0VBQ0EsYUFBQTtFQUNBLCtCQUFBO0FBSUY7QUFEQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsVUFBQTtBQUlGO0FBREE7RUFDRSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EsaUJBQUE7RUFDQSxvQkFBQTtFQUVBLE9BQUE7RUFDQSx5Q0FBQTtFQUNBLGVBQUE7RUFDQSxtQkFBQTtFQUNBLG1CQUFBO0VBQ0EsY0FBQTtBQUlGO0FBREE7RUFDRSxVQUFBO0VBQ0EsZUFBQTtBQUlGO0FBREE7O0VBRUUscUJBQUE7RUFDQSxzQkFBQTtBQUlGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvU1NUL3Byb3RlY2Npb24tY29sZWN0aXZhL3Byb3RlY2Npb24tY29sZWN0aXZhLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImRpdi50b29sYmFyIHtcbiAgYmFja2dyb3VuZDogI2JlYjJiMjtcbiAgY29sb3I6ICNmZmY7XG4gIHBhZGRpbmc6IDAgMTZweDtcbiAgaGVpZ2h0OiA0OHB4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGlvbi10aXRsZSB7XG4gICAgY29sb3I6ICNmZmY7XG4gIH1cbiAgJi50b29sY29udGVudCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICB9XG59XG5cbmJ1dHRvbi5ndWFyZGFyLWNvbnRpbnVhciB7XG4gIGNvbG9yOiAjZmZmO1xuICBiYWNrZ3JvdW5kOiAjNGI5YTQ5ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gIHdpZHRoOiA4MCU7XG4gIGhlaWdodDogMjRweDtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBmb250LXdlaWdodDogNTAwO1xuICB0ZXh0LXRyYW5zZm9ybTogbm9uZTtcbiAgYm9yZGVyOiBub25lO1xuICBvdXRsaW5lOiBub25lO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XG59XG5pb24tbGFiZWwge1xuICBtYXJnaW4tdG9wOiAxMnB4O1xuICBtYXJnaW4tYm90dG9tOiBhdXRvO1xuICBwYWRkaW5nOiBhdXRvO1xuICBmb250LXNpemU6IDE0cHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gIGNvbG9yOiAjMDAwO1xuICB0ZXh0LWFsaWduOiBqdXN0aWZ5O1xufVxuaW9uLWl0ZW0ubW9zdHJhci11c3VhcmlvcyB7XG4gIC8qIHF1aXRhciBlc3RpbG9zICovXG4gIC0tYmFja2dyb3VuZDogbm9uZTtcbiAgLS1ib3JkZXItY29sb3I6IG5vbmU7XG4gIC0tYm9yZGVyLXN0eWxlOiBub25lO1xuICB3aWR0aDogMTAwJTtcbiAgYmFja2dyb3VuZDogdmFyKC0taW9uLWJhY2tncm91bmQtY29sb3IpO1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICBwYWRkaW5nOiAwIDE2cHg7XG4gIGhlaWdodDogNDhweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuaW9uLWNhcmQtdGl0bGUge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICBmb250LXdlaWdodDogNjAwO1xufVxuXG4uc2Nyb2xsLWN1c3RvbSB7XG4gIHRleHQtb3ZlcmZsb3c6IGNsaXAgIWltcG9ydGFudDtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcCAhaW1wb3J0YW50O1xuICBvdmVyZmxvdzogc2Nyb2xsICFpbXBvcnRhbnQ7XG59XG5kaXYuYWxlcnQtY2hlY2tib3gtbGFiZWwge1xuICB0ZXh0LW92ZXJmbG93OiBjbGlwICFpbXBvcnRhbnQ7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXAgIWltcG9ydGFudDtcbiAgb3ZlcmZsb3c6IHNjcm9sbCAhaW1wb3J0YW50O1xufVxuXG5pb24tdGV4dGFyZWEge1xuICBtYXJnaW46IDA7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIHBhZGRpbmc6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDgwcHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG59XG5cbmlvbi1jYXJkIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5yZXF1aWVyZWRRdWVzIHtcbiAgY29sb3I6IHJlZCAhaW1wb3J0YW50O1xufVxuXG5pb24taXRlbS5ib3JkZXIge1xuICBoZWlnaHQ6IDQ1cHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkICM4MDgwODA7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG59XG5cbi5jZW50ZXItdHJhYmFqYWRvcmVzIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogMTdweDtcbn1cblxuaW9uLXNlbGVjdCB7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG5wLmNvdW50ZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBjb2xvcjogcmdiKDEzMywgMTc5LCAyMjUpICFpbXBvcnRhbnQ7XG4gIGp1c3RpZnktY29udGVudDogZW5kO1xuICBtYXJnaW4tdG9wOiAwO1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xufVxuXG4uc2VsZWN0LWljb24ge1xuICB3aWR0aDogMTJweDtcbiAgaGVpZ2h0OiAyNnB4O1xuICBvcGFjaXR5OiAxO1xufVxuXG5hbGVydC1jaGVja2JveC1sYWJlbC5zYy1pb24tYWxlcnQtbWQge1xuICBwYWRkaW5nLWxlZnQ6IDUzcHg7XG4gIHBhZGRpbmctcmlnaHQ6IDI2cHg7XG4gIHBhZGRpbmctdG9wOiAxM3B4O1xuICBwYWRkaW5nLWJvdHRvbTogMTNweDtcbiAgLW1zLWZsZXg6IDE7XG4gIGZsZXg6IDE7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3Itc3RlcC04NTAsICMyNjI2MjYpO1xuICBmb250LXNpemU6IDE2cHg7XG4gIHRleHQtb3ZlcmZsb3c6IGNsaXA7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIG92ZXJmbG93OiBhdXRvO1xufVxuXG4uZXJyb3ItbWVzc2FnZSB7XG4gIGNvbG9yOiByZWQ7XG4gIGZvbnQtc2l6ZTogMTJweDtcbn1cblxuaW9uLW1vZGFsLm1vZGFsLXdyYXBwZXIuaW9uLW92ZXJsYXktd3JhcHBlci5zYy1pb24tbW9kYWwtbWQsXG5pb24tbW9kYWwubW9kYWwtd3JhcHBlci5pb24tb3ZlcmxheS13cmFwcGVyLnNjLWlvbi1tb2RhbC1pb3Mge1xuICB3aWR0aDogODAlICFpbXBvcnRhbnQ7XG4gIGhlaWdodDogODAlICFpbXBvcnRhbnQ7XG59XG4iXX0= */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController, ModalController, Platform } from '@ionic/angular';\r\nimport { ModalTrabajadoresComponent } from 'src/app/components/modal-trabajadores/modal-trabajadores.component';\r\nimport { MaestroHijo } from 'src/app/interfaces/maestro-hijo';\r\nimport { MaestroPadre } from 'src/app/interfaces/maestro-padre';\r\nimport { DataQuestionsService } from 'src/app/services/SST/data-questions.service';\r\nimport { SaveDataService } from 'src/app/services/SST/save-data.service';\r\nimport { TablaTrabajadoresService } from 'src/app/services/SST/tabla-trabajadores.service';\r\nimport { UtilsService } from 'src/app/services/utils.service';\r\nimport { IonicSelectableComponent } from 'ionic-selectable';\r\nimport { SekectedItemsServiceService } from 'src/app/services/SST/sekected-items-service.service';\r\n\r\n@Component({\r\n  selector: 'app-proteccion-colectiva',\r\n  templateUrl: './proteccion-colectiva.page.html',\r\n  styleUrls: ['./proteccion-colectiva.page.scss'],\r\n})\r\nexport class ProteccionColectivaPage implements OnInit {\r\n  maestroPadre: MaestroPadre[] = [];\r\n  maestroHijo: MaestroHijo[] = [];\r\n  tituloEitmes = [];\r\n  selectedItems: { [key: number]: any } = {};\r\n  numerObligarorios: number = 0;\r\n  observaciones: string = '';\r\n  contadorObs = 0;\r\n  filtradosItems = [];\r\n  submited = false;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    public modalController: ModalController,\r\n    private utils: UtilsService,\r\n    private questionService: DataQuestionsService,\r\n    private dataService: SaveDataService,\r\n    private alertController: AlertController,\r\n    private tablaTrabajadoresService: TablaTrabajadoresService,\r\n    private selectedItemsService: SekectedItemsServiceService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.getData();\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.selectedItems = this.selectedItemsService.getSelectedItems();\r\n  }\r\n\r\n  portChange(event: { component: IonicSelectableComponent; value: any }) {\r\n    if (!event.value) {\r\n      console.log('event.value is undefined');\r\n      return;\r\n    }\r\n\r\n    if (event.value.id === undefined) {\r\n      console.log('event.value.id is undefined');\r\n      return;\r\n    }\r\n\r\n    if (!this.selectedItems) {\r\n      console.log('this.selectedItems is undefined');\r\n      return;\r\n    }\r\n    console.log('port:', event.value);\r\n    this.selectedItems[event.value.id] = event.value;\r\n    this.selectedItemsService.setSelectedItems(this.selectedItems);\r\n    console.log(this.selectedItems);\r\n  }\r\n\r\n  verTrabajadores() {\r\n    this.modalController\r\n      .create({\r\n        component: ModalTrabajadoresComponent,\r\n      })\r\n      .then(modal => {\r\n        modal.present();\r\n      });\r\n  }\r\n  private async getData() {\r\n    const dataUrl = history.state.data;\r\n    if (dataUrl) {\r\n      this.tablaTrabajadoresService.setListaTrabajadores(dataUrl['listaTrabajadoresMigrados']);\r\n      this.dataService.setData(dataUrl);\r\n      this.observaciones = dataUrl['strObservaciones'];\r\n      this.contadorObs = this.observaciones.length;\r\n      console.log(dataUrl);\r\n      let map = dataUrl['listaItemSeleccionados'].reduce((acc, items) => {\r\n        /* si items.leng === 0  eliminar esa lista */\r\n        if (items.length === 0) {\r\n          return acc;\r\n        }\r\n        acc[items[0].Fk_ID_PermisoAlturas_ItemProteccionPadre] = items;\r\n        return acc;\r\n      }, {});\r\n      this.selectedItems = map;\r\n      this.selectedItemsService.setSelectedItems(this.selectedItems);\r\n    }\r\n    await this.utils.presentLoading();\r\n    this.maestroPadre = await this.questionService.getAllMaestroPadres();\r\n    this.maestroHijo = await this.questionService.getAllMaestroHijos();\r\n    this.maestroPadre.forEach((padre: MaestroPadre) => {\r\n      this.maestroHijo.forEach((hijo: MaestroHijo) => {\r\n        if (padre.Pk_ID_PermisoAlturas_ItemProteccionPadre === hijo.Fk_ID_PermisoAlturas_ItemProteccionPadre) {\r\n          if (!this.tituloEitmes[padre.Pk_ID_PermisoAlturas_ItemProteccionPadre]) {\r\n            this.tituloEitmes[padre.Pk_ID_PermisoAlturas_ItemProteccionPadre] = [];\r\n          }\r\n          if (hijo.boolObligatorio) {\r\n            this.numerObligarorios++;\r\n            hijo.strDescricionPermiso = '* ' + hijo.strDescricionPermiso;\r\n          }\r\n          this.tituloEitmes[padre.Pk_ID_PermisoAlturas_ItemProteccionPadre].push(hijo);\r\n        } else {\r\n          if (!this.tituloEitmes[padre.Pk_ID_PermisoAlturas_ItemProteccionPadre]) {\r\n            this.tituloEitmes[padre.Pk_ID_PermisoAlturas_ItemProteccionPadre] = [];\r\n          }\r\n        }\r\n      });\r\n    });\r\n    this.utils.dismissLoading();\r\n    console.log(this.tituloEitmes);\r\n  }\r\n\r\n  async continuar() {\r\n    this.submited = true;\r\n    let check = await this.checkQuestions();\r\n    if (!check) {\r\n      return;\r\n    }\r\n    this.quitarAsterisco();\r\n    if (this.observaciones.length === 0) {\r\n      await this.mostrarError('Debe ingresar las observaciones');\r\n      return;\r\n    }\r\n    await this.guardarDatos();\r\n    this.router.navigate([\r\n      '/home/permisos/registro-permiso/crear-permiso/inicio-permiso/seccion-general/seccion-multiusos/seccion-plataforma/descripcion-actividad/proteccion-colectiva/evidencia',\r\n    ]);\r\n  }\r\n\r\n  async guardarDatos() {\r\n    let data = this.dataService.getData();\r\n\r\n    data['listaItemSeleccionados'] = this.filtradosItems;\r\n\r\n    this.filtradosItems.forEach(element => {\r\n      console.log(element);\r\n    });\r\n    data['lastRoute'] =\r\n      '/home/permisos/registro-permiso/crear-permiso/inicio-permiso/seccion-general/seccion-multiusos/seccion-plataforma/descripcion-actividad/proteccion-colectiva';\r\n    data['strObservaciones'] = this.observaciones;\r\n    this.dataService.setData(data);\r\n    await this.dataService.saveData();\r\n    this.selectedItems = {};\r\n  }\r\n\r\n  async quitarAsterisco() {\r\n    /* quitar asteriscos y eliminar uilimo array[] */\r\n    let obj = Object.values(this.selectedItems).filter(item => item !== undefined);\r\n    for (let i = 0; i < obj.length; i++) {\r\n      for (let j = 0; j < obj[i].length; j++) {\r\n        obj[i][j].strDescricionPermiso = obj[i][j].strDescricionPermiso.replace('* ', '');\r\n      }\r\n    }\r\n    /* aplanar any[] a [] */\r\n    this.filtradosItems = obj;\r\n    console.log(this.filtradosItems);\r\n  }\r\n  async checkQuestions(): Promise<boolean> {\r\n    let numeroContestados = 0;\r\n    let numeroObligatorios = this.numerObligarorios;\r\n    let TodosTitulosConHijos: string[] = [];\r\n\r\n    this.maestroPadre.forEach((padre: MaestroPadre) => {\r\n      this.maestroHijo.forEach((hijo: MaestroHijo) => {\r\n        if (padre.Pk_ID_PermisoAlturas_ItemProteccionPadre === hijo.Fk_ID_PermisoAlturas_ItemProteccionPadre) {\r\n          if (!TodosTitulosConHijos.includes(padre.strDescricionPermiso)) {\r\n            TodosTitulosConHijos.push(padre.strDescricionPermiso);\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    console.log(this.tituloEitmes);\r\n    for (const key in this.selectedItems) {\r\n      if (key === 'undefined') {\r\n        continue;\r\n      }\r\n      if (this.selectedItems.hasOwnProperty(key)) {\r\n        const preguntasObligatorias = (this.tituloEitmes[key]?.filter(element => element.boolObligatorio) || []).length;\r\n        let elements = this.selectedItems[key];\r\n        const preguntasObligatoriasRespondidas = (this.selectedItems[key]?.filter(element => element.boolObligatorio) || []).length;\r\n        /* si las elementos selecionados es mayor a las obligatorias eliminar del arreglo el titulo padre */\r\n        if (preguntasObligatorias <= preguntasObligatoriasRespondidas || preguntasObligatorias === 0) {\r\n          let tituloItem = this.maestroPadre.find(item => item.Pk_ID_PermisoAlturas_ItemProteccionPadre.toString() == key);\r\n          /* todos los titulos exepto los qu no tienene hijos */\r\n          TodosTitulosConHijos = TodosTitulosConHijos.filter(item => item !== tituloItem.strDescricionPermiso);\r\n        }\r\n        for (let element of elements) {\r\n          if (element.boolObligatorio) {\r\n            numeroContestados++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (numeroContestados < numeroObligatorios) {\r\n      const titulosIncompletos = TodosTitulosConHijos.join('<br>');\r\n      await this.mostrarError(\r\n        `Debe responder todas las preguntas obligatorias en los siguientes títulos: <br><br><strong>${titulosIncompletos}</strong>`\r\n      );\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private async mostrarError(message: string) {\r\n    const alert = await this.alertController.create({\r\n      header: 'Alerta',\r\n      message: message,\r\n      buttons: ['OK'],\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  back() {\r\n    let data = this.dataService.getData();\r\n\r\n    this.router.navigate(\r\n      [\r\n        '/home/permisos/registro-permiso/crear-permiso/inicio-permiso/seccion-general/seccion-multiusos/seccion-plataforma/descripcion-actividad',\r\n      ],\r\n      { state: { data } }\r\n    );\r\n  }\r\n\r\n  actualizarContador(event: any) {\r\n    if (event.target.value.length == 0) {\r\n      this.contadorObs = 0;\r\n      return;\r\n    }\r\n    this.contadorObs = event.target.value.length;\r\n  }\r\n}\r\n"]}