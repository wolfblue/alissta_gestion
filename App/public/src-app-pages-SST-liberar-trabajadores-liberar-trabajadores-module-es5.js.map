{"version":3,"sources":["webpack:///src/app/pages/SST/liberar-trabajadores/liberar-trabajadores.page.html","webpack:///src/app/pages/SST/liberar-trabajadores/liberar-trabajadores-routing.module.ts","webpack:///src/app/pages/SST/liberar-trabajadores/liberar-trabajadores.module.ts","webpack:///src/app/pages/SST/liberar-trabajadores/liberar-trabajadores.page.scss","webpack:///src/app/pages/SST/liberar-trabajadores/liberar-trabajadores.page.ts"],"names":["routes","path","component","LiberarTrabajadoresPageRoutingModule","imports","forChild","exports","LiberarTrabajadoresPageModule","declarations","LiberarTrabajadoresPage","dataBaseService","utils","context","device","alertController","dataService","router","trabajadores","auditoria","currentPage","workersPerPage","trabajadoresMarcados","totalPage","trabajadoresPorLiberar","open","then","getAllData","subscribe","next","data","updateTrabajadores","error","close","console","log","presentLoading","get","user","getAllTrabajadoresMigrados","dismissLoading","forEach","trabajador","accion","Math","ceil","length","complete","idsUser","usuariosUtiliados","push","PK_ID_PermisoAlturas_PersonasAMigrar","blnActivo","nombres","map","strNombreTrabajador","mesaageAlert","permios","strUUID","uuid","strIdentificacionUsuario","_id","strNombreUsuario","nombre","strNombreEmpresa","_razonSocial","strTipoDocEmpresa","_tipoDocumento","strDocumentoEmpresa","create","header","message","buttons","text","cssClass","role","handler","liberarTrabajador","alert","present","event","isChecked","detail","checked","isOnCurrentPage","filter","includes","index","indexOf","startIndex","endIndex","updatePage","trabajadoresEnPaginaActual","slice","todosMarcados","every","otrosMarcados","marcarTodos","navigate","permisoIncompleto","updateTrabajadorMigrado","selector","template"],"mappings":"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","file":"src-app-pages-SST-liberar-trabajadores-liberar-trabajadores-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <app-nav-bar></app-nav-bar>\\n  <div>\\n    <ion-item class=\\\"mostrar-usuarios\\\">\\n      <ion-icon (click)=\\\"back()\\\" name=\\\"chevron-back-outline\\\" slot=\\\"start\\\"></ion-icon>\\n    </ion-item>\\n  </div>\\n  <div style=\\\"display: flex; align-items: center\\\" class=\\\"toolbar\\\">\\n    <span> <ion-img style=\\\"width: 32px; height: 32px; margin-right: 12px\\\" src=\\\"assets/img/carbon_result-draft.svg\\\"></ion-img> </span>\\n    <ion-title style=\\\"color: #7e7e7e; padding: 0\\\"><strong> PERMISOS DE TRABAJO</strong></ion-title>\\n  </div>\\n</ion-header>\\n<ion-content>\\n  <div class=\\\"toolbar toolcontent\\\">\\n    <ion-title> <ion-icon style=\\\"transform: rotate(308deg)\\\" name=\\\"send\\\"></ion-icon> Liberar Trabajadores</ion-title>\\n  </div>\\n\\n  <ion-item *ngIf=\\\"trabajadores.length > 0\\\" style=\\\"padding-bottom: 0\\\" class=\\\"ion-padding\\\">\\n    <ion-checkbox [(ngModel)]=\\\"marcarTodos\\\" (ionChange)=\\\"onChangeMarcarTodos($event)\\\"></ion-checkbox>\\n    <ion-label>&nbsp;<strong> Seleccionar toda la página</strong></ion-label>\\n  </ion-item>\\n\\n  <div style=\\\"padding-top: 0\\\" class=\\\"ion-padding\\\" *ngIf=\\\"trabajadores.length > 0\\\">\\n    <!-- <ion-item *ngFor=\\\"let trabajador of trabajadores\\\">\\n      <ion-card>\\n        <ion-card-header>\\n          <ion-card-title>{{trabajador.}}</ion-card-title>\\n          <ion-card-subtitle>{{trabajador}} : {{trabajador}}</ion-card-subtitle>\\n        </ion-card-header>\\n\\n        <ion-button (click)=\\\"liberarUser(trabajador, trbajador)\\\" fill=\\\"clear\\\" color=\\\"danger\\\">liberar</ion-button>\\n      </ion-card>\\n    </ion-item> -->\\n\\n    <ion-grid>\\n      <ion-row class=\\\"header-table\\\">\\n        <ion-col size=\\\"3\\\">\\n          <ion-label>Nombre </ion-label>\\n        </ion-col>\\n        <ion-col size=\\\"3\\\">\\n          <ion-label>ID</ion-label>\\n        </ion-col>\\n        <ion-col size=\\\"4\\\">\\n          <ion-label>Cargo</ion-label>\\n        </ion-col>\\n        <ion-col size=\\\"2\\\">\\n          <ion-label>Liberar</ion-label>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row\\n        *ngFor=\\\"let trabajador of trabajadores | slice:(currentPage - 1) * workersPerPage:currentPage * workersPerPage\\\"\\n        class=\\\"body-table\\\"\\n      >\\n        <ion-col size=\\\"3\\\">\\n          <ion-label>{{trabajador.strNombreTrabajador}}</ion-label>\\n        </ion-col>\\n        <ion-col size=\\\"3\\\">\\n          <ion-label>{{trabajador.strNumeroDocumeto}}</ion-label>\\n        </ion-col>\\n        <ion-col size=\\\"4\\\">\\n          <ion-label>{{trabajador.strCargoTrabajador}}</ion-label>\\n        </ion-col>\\n        <ion-col size=\\\"2\\\" class=\\\"check\\\">\\n          <ion-checkbox [(ngModel)]=\\\"trabajador.accion\\\"></ion-checkbox>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n    <div class=\\\"pagination-buttons ion-text-center\\\">\\n      <ion-button (click)=\\\"previousPage()\\\" [disabled]=\\\"currentPage === 1\\\"><ion-icon name=\\\"chevron-back\\\"></ion-icon></ion-button>\\n      <ion-button [disabled]=\\\"true\\\">{{currentPage}}/{{totalPage}}</ion-button>\\n      <ion-button (click)=\\\"nextPage()\\\" [disabled]=\\\"currentPage * workersPerPage >= trabajadores.length\\\"\\n        ><ion-icon name=\\\"chevron-forward-outline\\\"></ion-icon\\n      ></ion-button>\\n    </div>\\n    <div class=\\\"ion-text-center ion-padding\\\">\\n      <button class=\\\"guardar-continuar\\\" *ngIf=\\\"trabajadores.length > 0\\\" color=\\\"secondary\\\" (click)=\\\"liberarUser()\\\">Liberar</button>\\n    </div>\\n  </div>\\n  <div class=\\\"ion-text-center ion-padding\\\">\\n    <br />\\n    <br />\\n    <br />\\n\\n    <button class=\\\"guardar-continuar\\\" *ngIf=\\\"trabajadores.length === 0\\\" color=\\\"secondary\\\" (click)=\\\"volver()\\\">Volver</button>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LiberarTrabajadoresPage } from './liberar-trabajadores.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LiberarTrabajadoresPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LiberarTrabajadoresPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LiberarTrabajadoresPageRoutingModule } from './liberar-trabajadores-routing.module';\n\nimport { LiberarTrabajadoresPage } from './liberar-trabajadores.page';\nimport { SharedModule } from 'src/app/shared.module';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, LiberarTrabajadoresPageRoutingModule, SharedModule],\n  declarations: [LiberarTrabajadoresPage],\n})\nexport class LiberarTrabajadoresPageModule {}\n","export default \"@charset \\\"UTF-8\\\";\\ndiv.toolbar {\\n  background: #beb2b2;\\n  color: #fff;\\n  padding: 0 16px;\\n  height: 48px;\\n  align-items: center;\\n  display: flex;\\n  text-align: center;\\n}\\ndiv.toolbar ion-title {\\n  color: #fff;\\n}\\ndiv.toolbar.toolcontent {\\n  background-color: var(--ion-color-primary);\\n}\\nion-card {\\n  width: 100%;\\n}\\n.botonCancelar {\\n  color: green;\\n  /* Cambia el color de texto del botón \\\"Cancelar\\\" a verde */\\n}\\n.botonAceptar {\\n  color: red;\\n  /* Cambia el color de texto del botón \\\"Aceptar\\\" a rojo */\\n}\\n.header-table {\\n  font-size: 0.7rem;\\n  font-weight: bold;\\n  background-color: #b1b7bd;\\n  color: black;\\n  text-align: center;\\n  padding: 2px;\\n  border: 1px solid #b1b7bd;\\n  border-radius: 5px 5px 0px 0px;\\n  border-collapse: collapse;\\n  border-spacing: 0;\\n  width: 100%;\\n  margin: 0 auto;\\n  align-items: center;\\n}\\n.body-table {\\n  font-size: 0.65rem;\\n  font-weight: 400;\\n  background-color: #e9ecef;\\n  color: black;\\n  text-align: start;\\n  align-items: center;\\n  padding-bottom: 2px;\\n  border: 1px solid #b1b7bd;\\n}\\n.body-table .check {\\n  text-align: center;\\n}\\nbutton.guardar-continuar {\\n  color: #fff;\\n  background: #4b9a49 !important;\\n  margin-top: 10px;\\n  border-radius: 24px;\\n  width: 50%;\\n  height: 24px;\\n  font-size: 14px;\\n  font-weight: 500;\\n  text-transform: none;\\n  border: none;\\n  outline: none;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n}\\nion-fab-button.float-button {\\n  --padding: 0;\\n  --margin: 0;\\n  --size: 44px;\\n  --background: #ff7500;\\n}\\nion-icon.float-button {\\n  --background: #ff7500;\\n}\\n.custom-icon-float {\\n  width: 100%;\\n  height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvU1NUL2xpYmVyYXItdHJhYmFqYWRvcmVzL2xpYmVyYXItdHJhYmFqYWRvcmVzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFBaEI7RUFDRSxtQkFBQTtFQUNBLFdBQUE7RUFDQSxlQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0FBRUY7QUFERTtFQUNFLFdBQUE7QUFHSjtBQURFO0VBQ0UsMENBQUE7QUFHSjtBQUNBO0VBQ0UsV0FBQTtBQUVGO0FBQ0E7RUFDRSxZQUFBO0VBQWMsMERBQUE7QUFHaEI7QUFBQTtFQUNFLFVBQUE7RUFBWSx3REFBQTtBQUlkO0FBREE7RUFDRSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0EseUJBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EseUJBQUE7RUFDQSw4QkFBQTtFQUNBLHlCQUFBO0VBQ0EsaUJBQUE7RUFDQSxXQUFBO0VBQ0EsY0FBQTtFQUNBLG1CQUFBO0FBSUY7QUFEQTtFQUNFLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSx5QkFBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtFQUNBLG1CQUFBO0VBQ0EsbUJBQUE7RUFDQSx5QkFBQTtBQUlGO0FBSEU7RUFDRSxrQkFBQTtBQUtKO0FBRkE7RUFDRSxXQUFBO0VBQ0EsOEJBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsVUFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxvQkFBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0EsZUFBQTtFQUNBLHlCQUFBO0FBS0Y7QUFGQTtFQUNFLFlBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLHFCQUFBO0FBS0Y7QUFGQTtFQUNFLHFCQUFBO0FBS0Y7QUFGQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0FBS0YiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9TU1QvbGliZXJhci10cmFiYWphZG9yZXMvbGliZXJhci10cmFiYWphZG9yZXMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGNoYXJzZXQgXCJVVEYtOFwiO1xuZGl2LnRvb2xiYXIge1xuICBiYWNrZ3JvdW5kOiAjYmViMmIyO1xuICBjb2xvcjogI2ZmZjtcbiAgcGFkZGluZzogMCAxNnB4O1xuICBoZWlnaHQ6IDQ4cHg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbmRpdi50b29sYmFyIGlvbi10aXRsZSB7XG4gIGNvbG9yOiAjZmZmO1xufVxuZGl2LnRvb2xiYXIudG9vbGNvbnRlbnQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XG59XG5cbmlvbi1jYXJkIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5ib3RvbkNhbmNlbGFyIHtcbiAgY29sb3I6IGdyZWVuO1xuICAvKiBDYW1iaWEgZWwgY29sb3IgZGUgdGV4dG8gZGVsIGJvdMOzbiBcIkNhbmNlbGFyXCIgYSB2ZXJkZSAqL1xufVxuXG4uYm90b25BY2VwdGFyIHtcbiAgY29sb3I6IHJlZDtcbiAgLyogQ2FtYmlhIGVsIGNvbG9yIGRlIHRleHRvIGRlbCBib3TDs24gXCJBY2VwdGFyXCIgYSByb2pvICovXG59XG5cbi5oZWFkZXItdGFibGUge1xuICBmb250LXNpemU6IDAuN3JlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGJhY2tncm91bmQtY29sb3I6ICNiMWI3YmQ7XG4gIGNvbG9yOiBibGFjaztcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwYWRkaW5nOiAycHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNiMWI3YmQ7XG4gIGJvcmRlci1yYWRpdXM6IDVweCA1cHggMHB4IDBweDtcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgYm9yZGVyLXNwYWNpbmc6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXJnaW46IDAgYXV0bztcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuLmJvZHktdGFibGUge1xuICBmb250LXNpemU6IDAuNjVyZW07XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlOWVjZWY7XG4gIGNvbG9yOiBibGFjaztcbiAgdGV4dC1hbGlnbjogc3RhcnQ7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmctYm90dG9tOiAycHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNiMWI3YmQ7XG59XG4uYm9keS10YWJsZSAuY2hlY2sge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbmJ1dHRvbi5ndWFyZGFyLWNvbnRpbnVhciB7XG4gIGNvbG9yOiAjZmZmO1xuICBiYWNrZ3JvdW5kOiAjNGI5YTQ5ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gIHdpZHRoOiA1MCU7XG4gIGhlaWdodDogMjRweDtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBmb250LXdlaWdodDogNTAwO1xuICB0ZXh0LXRyYW5zZm9ybTogbm9uZTtcbiAgYm9yZGVyOiBub25lO1xuICBvdXRsaW5lOiBub25lO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XG59XG5cbmlvbi1mYWItYnV0dG9uLmZsb2F0LWJ1dHRvbiB7XG4gIC0tcGFkZGluZzogMDtcbiAgLS1tYXJnaW46IDA7XG4gIC0tc2l6ZTogNDRweDtcbiAgLS1iYWNrZ3JvdW5kOiAjZmY3NTAwO1xufVxuXG5pb24taWNvbi5mbG9hdC1idXR0b24ge1xuICAtLWJhY2tncm91bmQ6ICNmZjc1MDA7XG59XG5cbi5jdXN0b20taWNvbi1mbG9hdCB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { async } from '@angular/core/testing';\nimport { Router } from '@angular/router';\nimport { Device } from '@ionic-native/device/ngx';\nimport { AlertController } from '@ionic/angular';\nimport { EDGuardarPermisoTrabajoAPP } from 'src/app/interfaces/edguardar-permiso-trabajo-app';\nimport { EDInfoAuditoriaAPP } from 'src/app/interfaces/edinfo-auditoria-app';\nimport { TrabajadorMigrado } from 'src/app/interfaces/trabajador-migrado';\nimport { DataBaseService } from 'src/app/services/SST/data-base.service';\nimport { DataService } from 'src/app/services/SST/data.service';\nimport { ContextService } from 'src/app/services/context.service';\nimport { UtilsService } from 'src/app/services/utils.service';\n\n@Component({\n  selector: 'app-liberar-trabajadores',\n  templateUrl: './liberar-trabajadores.page.html',\n  styleUrls: ['./liberar-trabajadores.page.scss'],\n})\nexport class LiberarTrabajadoresPage implements OnInit {\n  trabajadores: TrabajadorMigrado[] = [];\n  user: any;\n  auditoria: EDInfoAuditoriaAPP = new EDInfoAuditoriaAPP();\n  currentPage: number = 1;\n  workersPerPage: number = 10;\n  marcarTodos: any;\n  trabajadoresMarcados: any[] = [];\n  totalPage: number = 0;\n  data: EDGuardarPermisoTrabajoAPP[];\n\n  constructor(\n    private dataBaseService: DataBaseService,\n    private utils: UtilsService,\n    private context: ContextService,\n    private device: Device,\n    private alertController: AlertController,\n    private dataService: DataService,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    this.trabajadoresPorLiberar();\n    this.dataBaseService.open().then(() => {\n      this.dataBaseService.getAllData().subscribe({\n        next: (data: EDGuardarPermisoTrabajoAPP[]) => {\n          this.data = data;\n          this.updateTrabajadores();\n        },\n        error: error => {\n          this.dataBaseService.close();\n        },\n      });\n    });\n  }\n\n  async trabajadoresPorLiberar() {\n    console.log('trabajadoresPorLiberar');\n    try {\n      await this.utils.presentLoading();\n      this.user = await this.context.get();\n      await this.dataBaseService.open().then(() => {\n        this.dataBaseService.getAllTrabajadoresMigrados().subscribe({\n          next: (trabajadores: TrabajadorMigrado[]) => {\n            this.utils.dismissLoading();\n            trabajadores.forEach((trabajador: TrabajadorMigrado) => {\n              trabajador.accion = false;\n            });\n            this.trabajadores = trabajadores;\n            this.totalPage = Math.ceil(this.trabajadores.length / this.workersPerPage);\n          },\n          error: error => {\n            console.error('Error al obtener los trabajadores disponibles:', error);\n            this.dataBaseService.close();\n          },\n          complete: () => {\n            console.log('Trabajadores disponibles completados');\n            this.utils.dismissLoading();\n          },\n        });\n      });\n    } catch (error) {\n      console.error('Error al liberar trabajadores:', error);\n      this.dataBaseService.close();\n      this.utils.dismissLoading();\n    }\n  }\n\n  liberarUser() {\n    let idsUser: number[] = [];\n    let usuariosUtiliados: TrabajadorMigrado[] = [];\n    this.trabajadores.forEach((trabajador: TrabajadorMigrado) => {\n      if (trabajador.accion) {\n        idsUser.push(trabajador.PK_ID_PermisoAlturas_PersonasAMigrar);\n      }\n      return idsUser;\n    });\n\n    this.trabajadores.forEach((trabajador: TrabajadorMigrado) => {\n      if (trabajador.blnActivo && trabajador.accion) {\n        usuariosUtiliados.push(trabajador);\n      }\n      return usuariosUtiliados;\n    });\n\n    if (usuariosUtiliados.length > 0) {\n      let nombres = usuariosUtiliados.map((trabajador: TrabajadorMigrado) => {\n        return trabajador.strNombreTrabajador;\n      });\n      return this.mesaageAlert('No se pueden liberar trabajadores que esten en un permiso pendiente: \\n' + nombres);\n    }\n\n    if (idsUser.length === 0) return this.mesaageAlert('Debe seleccionar al menos un trabajador');\n    let permios;\n    /* estas seguro de eliminar el usuario */\n    /* si es cordova colocar web */\n    this.auditoria.strUUID = this.device.uuid ? this.device.uuid : 'web';\n    this.auditoria.strIdentificacionUsuario = this.user['_trabajador']._id;\n    this.auditoria.strNombreUsuario = this.user['_trabajador'].nombre;\n    this.auditoria.strNombreEmpresa = this.user['_empresa']._razonSocial;\n    this.auditoria.strTipoDocEmpresa = this.user['_empresa']._tipoDocumento;\n    this.auditoria.strDocumentoEmpresa = this.user['_empresa']._id;\n    this.alertController\n      .create({\n        header: 'Liberar trabajador',\n        message: `¿Estas seguro de liberar a los trabajadores?`,\n        buttons: [\n          {\n            text: 'Cancelar',\n            cssClass: 'color: green !important',\n            role: 'cancel',\n            handler: () => {\n              console.log('Cancelado');\n            },\n          },\n          {\n            text: 'Aceptar',\n            cssClass: 'color: red !important',\n            handler: async () => {\n              await this.utils.presentLoading();\n              await this.dataService.liberarTrabajador(idsUser, this.auditoria);\n              await this.trabajadoresPorLiberar();\n              this.utils.dismissLoading();\n            },\n          },\n        ],\n      })\n      .then(alert => {\n        alert.present();\n      });\n  }\n\n  onChangeMarcarTodos(event: any) {\n    const isChecked = event.detail.checked;\n    this.trabajadores = this.trabajadores.map(trabajador => {\n      if (this.isOnCurrentPage(trabajador)) {\n        trabajador.accion = isChecked;\n      }\n      return trabajador;\n    });\n\n    if (isChecked) {\n      this.trabajadores\n        .filter(trabajador => !this.trabajadoresMarcados.includes(trabajador))\n        .forEach(trabajador => this.trabajadoresMarcados.push(trabajador));\n    } else {\n      this.trabajadoresMarcados = this.trabajadoresMarcados.filter(trabajador => !trabajador.accion);\n    }\n  }\n\n  isOnCurrentPage(trabajador: any): boolean {\n    const index = this.trabajadores.indexOf(trabajador);\n    const startIndex = (this.currentPage - 1) * this.workersPerPage;\n    const endIndex = this.currentPage * this.workersPerPage;\n    return index >= startIndex && index < endIndex;\n  }\n\n  previousPage() {\n    if (this.currentPage > 1) {\n      this.currentPage--;\n      this.updatePage();\n    }\n  }\n\n  nextPage() {\n    if (this.currentPage * this.workersPerPage < this.trabajadores.length) {\n      this.currentPage++;\n      this.updatePage();\n    }\n  }\n\n  updatePage() {\n    const trabajadoresEnPaginaActual = this.trabajadores.slice(\n      (this.currentPage - 1) * this.workersPerPage,\n      this.currentPage * this.workersPerPage\n    );\n\n    const todosMarcados = trabajadoresEnPaginaActual.every(trabajador => trabajador.accion);\n    const otrosMarcados = this.trabajadoresMarcados.every(trabajador => trabajador.accion);\n\n    this.marcarTodos = todosMarcados && otrosMarcados;\n  }\n\n  private mesaageAlert(message: string) {\n    this.alertController\n      .create({\n        header: 'Información',\n        message,\n        buttons: ['Aceptar'],\n      })\n      .then(alert => {\n        alert.present();\n      });\n  }\n  pushPermisosSST(): void {\n    this.router.navigate(['/home/permisos']);\n  }\n\n  async updateTrabajadores() {\n    try {\n      this.data.forEach(permisoIncompleto => {\n        permisoIncompleto['listaTrabajadoresMigrados'].forEach(async trabajador => {\n          console.log(trabajador);\n          await this.dataBaseService.updateTrabajadorMigrado(trabajador);\n        });\n      });\n    } catch (error) {}\n  }\n\n  volver() {\n    this.router.navigate(['/home/permisos']);\n  }\n  back() {\n    this.router.navigate(['/home/permisos']);\n  }\n}\n"]}